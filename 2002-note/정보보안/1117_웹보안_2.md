## 정보보호

### IP spoofing

#### Ingress/egress filtering

##### Ingress 

밖에서 안으로 들어오는 것을 막는 것. 예를들어 밖에서 들어오는 패킷의 ip가 내부망 주소이다? 이것은 해킹이므로 막는다. 

##### egress

안에서 밖으로 나가는 것을 막는 것. 내부 패킷이 나갈때 확인을 하는데 출발지 ip가 내부망 주소가 아니고 이상한 주소라면 이상한 패킷이므로 막는다. 

라우터에 이 ingress/egress 검열을 한다면 부하가 간다. 때문에 ingress 먼저 적용한다. 

#### TCP session hijacking

> 비행기 납치 하는것을 hijacking.

TCP 3 handshake 에서 세션이 맺어졌는데 이 세션을 통째로 가져가 버리는 것. TCP sequence number가 있다. A가 서버 B는 클라이언트, 공격자 E가 있을때 E가 먼저 ip spoofing을 한다. B가 사용하는 ip주소로 바꾼다. 이제 E가 A에게 접속한다. 패킷이 왔다갔다 할때 출발 주소가 B이므로 B인줄 안다. 받은 패킷에 대해 응답할때 B로 가는데 E는 B에게 디도스 공격 등으로 죽여놓는다. 그러면 B는 메시지를 받지 못한다. E는 이 메세지를 추측하거나 가져오거나 한다. 

시퀀스 넘버를 함께 받는데 이 값을 알아야 가능. 예전에는 이 시퀀스 넘버가 쉬웠다. 그래서 TCP통신 초기 클라이언트가 서버에게 보내는 ISN(이니셜 시퀀스 넘버)를 국제표준으로 복잡하게 만들자고 정함.

M+F(sip, sport,dip,dport | 여기까지 랜덤성,\<some secret> | 여기는 안정성) : M = monotonically increasing clock/counter

F는 해시값을 준다. MD5말고 SHA256같은거.

#### Injecting false routing information

주입한다 잘못된 라우팅 정보를. 라우터를 찾을때 라우터중 하나가 만일 해커에 의해 점령당한 라우터라고 한다면 잘못된 정보를 쭉뿌린다. 이것을 막기 위해 라우터 주변에서 서로를 인증한다. 해시 맥을 붙여서 라우터들간 인증시킴.

#### Port scan

공격자가 서버 특정 포트에 패킷 보내봄. Syn/ack 가 오면 포트 존재. rst/ack가 오면 포트가 존재하지 않음. 이것을 이용해 포트가 열린 것을 파악한다. 포트에 따라 제공하는 서비스가 조금씩 다르므로 대략적인 제공 서비스를 파악할 수 있다. 취약한 ip도 찾고 취약한 포트번호도 찾는것이 목적. 

fin패킷이나 ack패킷만 보내는 방법도 존재한다. 어쨋든 공격자는 되돌아오는 반응을 보고 정보를 추측해내는 것이다. 때문에 요즘에는 어떠한 정보도 내보내지 않도록 주의하며 보안을 구축한다. 

#### Firewall

일반적으로 방화벽을 라우터와 스위치 사이에 구성. 웹서버와 디비서버가 구성되 있다고 한다면 디비서버에는 웹서버만 접근할 것임. 때문에 방화벽이 외부에서의 접근을 웹서버로의 접근만 허용하도록 하고싶다. 