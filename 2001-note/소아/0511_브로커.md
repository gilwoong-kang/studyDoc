## 아키텍쳐

### 브로커 아키텍쳐

분산적으로 시스템들이 있을때 중간자 (미들웨어 아키텍쳐) 를가지고, 서버쪽 서비스가 레지스터됨. 클라이언트는 서버쪽 정보를 모른다. 사용자는 중간자에게 정보를 넘기면 중간자가 적절한 서버에게 전송한 뒤 정보를 받는다. 

분산상의 시스템 아키텍쳐를 제공. 리모트한 서비스를 제공하여 분산 오브젝트를 다른 위치에 있는 클라이언트가 사용할 수 있도록 함. 커플링을 낮추는 효과를 얻을 수 있음.

브로커는 코디네이터 중간 역할. 상호 연관 되도록 도와줌.클라이언트가 리퀘스트 하는 것을 전달. 결과가 다시 클라이언트에게 전달함. 에러나 예외도 전달함. 

<img src="/Users/gilwoongkang/School/2001-note/소아/image/스크린샷 2020-05-11 오후 1.27.56.png" alt="스크린샷 2020-05-11 오후 1.27.56" style="zoom:80%;" />

이종 서버 시스템. heterogeneous한 시스템. 각 서버는 독립적 운행함. 각 서버를 브로커에 등록한다. 클라이언트가 브로커에서 이러한 정보가 필요하다고 제공하면 브로커가 서버에게 넘겨주고 처리하여 반환함. 

인보케이션 위주로 처리될 요지가 존재함. (호출의 형태로 처리). Document, message-oriented하게 처리될 경우가 높음. XML형태로 처리될 가능성이 높다. 

서버와 클라이언트의 퍼포먼스를 증가 시키고 여러가지 퀄리티 어트리뷰트를 달성 하도록 한다. 브로커는 프록시 베이스 시스템으로 이루어져 있다. 

서버는 자기의 서비스를 등록 할 필요각 있고, 인터페이스를 제공해야 한다. 

예시 CORBA(Common Objectt Request Broker Architecture) 

브로커는 클라리언트 서버 구조를 디커플 할 수 있는 아키텍쳐.

- 서버

  브로커에 등록. 인터페이스를 브로커에 전달함

- 클라이언트

  서버를 콜 하듯이 브로커에게 전달 하면 브로커가 처리해서 줌.

- 브로커

  서버의 서비스를 위치정보를 등록하거나 알고있음. 클라이언트의 요청을 서버에게 전달. 결과를 전달한다.

#### Solution

<img src="/Users/gilwoongkang/School/2001-note/소아/image/스크린샷 2020-05-11 오후 1.36.17.png" alt="스크린샷 2020-05-11 오후 1.36.17" style="zoom:80%;" />

프록시를 거쳐서 통신. 브릿지는 다른 브로커들과 통신할때 이용하는 것. 

브로커는 코디네이터 역할. 요청을 처리함. 서버쪽 등록정보와 역할, 위치를 가지고 있음. 인터페이스 또한 가지고 클라이언트에게 제공한다. 

클라이언트 사이드 프록시(Stub) 클라이언트와 브로커 사이의 중간자 역할. 브로커와 클라이언트 쪽이 투명성을 가지게 된다. 외부 오브젝트가 로컬 오브젝트 처럼 다룰수 있도록 함. 내부의 것이 외부로 갈때 숨기는 역할.보내는 파라미터에 대해 마셜링을 수행한다. 

서버 프록시(Skeleton). 인터페이스의 형태만 가지고 이것을 제공함. 시스템적인 내용을 인캡슐레이션. 언 마셜링 하는 효과. 적절한 서비스를 인보케이션. 

브릿지. 다양한 브로커와의 연결. 확장구조를 가지도록 도와줌. 

#### Dynamics

일반적인 다이나믹이 있고, 아래와 같은 것도 있다.

<img src="image/스크린샷 2020-05-13 오전 10.47.15.png" alt="스크린샷 2020-05-13 오전 10.47.15" style="zoom:80%;" />

스트리밍 같은 서비스의 경우 브로커가 계속 forward 할 필요가 없으므로 브로커가 위치 정보를 클라이언트 프록시에게 주고 직접 연결 하도록 하는 경우가 있다. 

#### Example - CORBA

분산 객체에 대한 브로커. 오픈 스탠다드. 분산 객체를 외부에서 사용할 수 있는 표준화 체계. 플랫폼,랭귀지 인디펜던트 함. 외부에 있는 오브젝트 제공 가능. IDL(interface definition language)통해 제공. 

<img src="image/스크린샷 2020-05-13 오전 10.51.46.png" alt="스크린샷 2020-05-13 오전 10.51.46" style="zoom:80%;" />

필요에 따라 facilities이용 가능하다. 

#### 장점

로케이션 트랜스패런시. 어디든 투명성있게 제공한다는 것. 히든되게 제공한다는 것임. 서버가 언제든 바뀔 수 있고 확장 가능한 형태. 

클라이언트는 브로커만 통해서 서버연결 가능. 서버 확장 가능. 브릿지를 통해 연결 가능하고 reusability. 실행시간 동안 서버가 변경되는 것을 반영 가능

#### 단점

프록시가 많은것이 단점임. 