## 아키텍쳐

### 메세지 브로커

클라이언트 메세지 전달. 브로커가 메세지를 받아 서버에 전달한다. 메세지로 운영되는 형태임. XML Document같은 것을 보내게 되면 브로커는 MOM(message-Oriented Middleware)을 통해 처리시킴.

메세지 라우트 메세지 변환 인보케이션이나 보안 확인 예외 처리 등 처리함.

##### MOM(message-Oriented Middleware)

메세지로 운용되는 미들웨어. 클라-서버 에서 서버 프로세서가 항상 대기해야 한다는 단점이 있음. 또한 서버에 대한 모든 정보를 가지고 있어야 하고 프로토콜을 맞춰야 한다는 점이 있다. 서버 또한 많은 요청에 대해 처리 문제가 존재한다. 

클라-서버 사이에 리퀘스트를 보낼때 버퍼를 둔다. 이 버퍼에 리퀘스트를 보내고, 서버는 자신의 일 처리에 따라 이 버퍼에서 리퀘스트를 가져다가 처리한다. 리스폰스때도 버퍼에 값을 두어 서버가 버퍼에 보내고 클라가 버퍼에서 값을 가져온다.

디커플링 효과를 가져올수 있다. 

리퀘스트 보낼때 좀 크면 메세지 단위로 처리하게 된다. 이러한 구조를 MOM이라고 칭함. 

##### Message Broker

메세지를 보내는데 메세지 브로커는 이 메세지를 라우팅 한다. 메세지의 content에 따라서 필요한 시스템에게 전달함. 브로커는 메세지를 다른 형태의 포맷으로 변경 해 줄수도 있음. 필요에 맞추어 제공한다. 데이터를 보낼때, modify, inserting, merging, remove 등 여러 작업들이 추가 될 수 있음. 

필요에 따라 라우터를 통해 전달. 만일 서버로 바로 전달해도 괜찮을 경우 그렇게 처리한다. 메세지 브로커는 메세지 단위로 처리하고 다른 메세지 브로커로 라우팅 할 수도있으며, 변환하여 사용할 수도 있는 형태이다. 

#### Application

메세지를 다른 시스템에 분배. Publishing, subscribing 되도록. 토픽을 등록하면 브로커로부터 해당 토픽에 대해 받아 볼 수 있다. 

##### Commercial 

MQSeries, JMS 등

#### 장단점

계속적으로 reuse가 좋아짐. 컴포넌트 재사용 가능. 커플링이 낮아지고 쉬운 extension. Flexibility

여러 브로커를 통해 거쳐가서 오버헤드, 인다이렉션, 복잡성 증가