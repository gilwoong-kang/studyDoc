## 아키텍쳐

### 멀티 티어 아키텍쳐

#### 원티어 아키텍쳐

원티어라는 것은 한 컴퓨터 안에 모든 코드를 다 가지고 있는 형태. 외부에서 클라이언트가 연결해서 사용하더라도 사용자는 dumb-terminal을 연결해서 쓰는 형태라고 할 수 있다. 이런 형태는 monolithic하다. 전체 모듈이 하나의 메인 프레임에 들어있다. 

##### 모놀리틱 정보 시스템에 대해 

프레젠테이션 하는 부분, 어플리케이션에 대한 프로세싱하는 부분, 디비와 같은 리소스를 접근하고 처리하는단계. 이것을 레이어로 잘랐다. 

<img src="/Users/gilwoongkang/School/2001-note/소아/image/스크린샷 2020-04-27 오전 11.49.19.png" alt="스크린샷 2020-04-27 오전 11.49.19" style="zoom:50%;" />

인포메이션 시스템이라는 것은 통상 이렇게 세가지 기본 구조를 가진다. 모든 코드를 한 노드에 적재 하는 것을 원 티어 아키텍쳐라고 한다. 외부에서 접근하는 것은 터미널로 접근하게 한다. 

#### 투 티어 아키텍쳐

두개의 노드. 통상 두개의 노드가 있는데, 프레젠테이션 노드를 따로 놓고, 어플리케이션 + 리소스 레이어를 따로 놓느다. 

<img src="/Users/gilwoongkang/School/2001-note/소아/image/스크린샷 2020-04-27 오후 12.12.43.png" alt="스크린샷 2020-04-27 오후 12.12.43" style="zoom:50%;" />

어플리케이션 + 리소스 레이어는 서버에 적재한다. 

##### 투 티어 클라이언트 서버 아키텍쳐

<img src="/Users/gilwoongkang/School/2001-note/소아/image/스크린샷 2020-04-27 오후 12.14.25.png" alt="스크린샷 2020-04-27 오후 12.14.25" style="zoom:67%;" />

Information System. 에서 어디를 자를 것인가 하는 것이다. (a) ~ (e). (a)를 보면 유저 인터페이스 부분이 적당히 분리 되어 있는데, 이렇게 프레젠테이션 레이어를 완전하게 분리할 필요는 없다. 필요에 따라 분리 가능. 



클라이언트 서버 아키텍쳐 구조가 많다. 사용자에 관한 처리에 대한것이 Client에. 리소스 등을 저장학고 적재 하는 것이 서버측에. 서버에 통상 관리자가 있을 수 있다. 다른 종류의 서버들 반드시 연동되어야 하는 레거시 시스템이 같이 물려서 이용. 

클라이언트는 두가지로 나뉨.

- Thin

  가벼운 일들이 있는 클라이언트. 하는일이 조금 적고 전력이 제한되고 그러한 기능을 탑재하는 클라이언트.

- Fat

  상탄 (a) ~ (e) 그림중 우측으로 갈 수록 팻한 클라이언트. 처리가 많음. 

#### 쓰리티어 아키텍쳐

<img src="image/스크린샷 2020-04-27 오후 12.34.43.png" alt="스크린샷 2020-04-27 오후 12.34.43" style="zoom:67%;" />

클라이언트 쪽에 있는 티어와 서버 티어 중간에 어떤 어플리케이션 관련 일을 담당하는 티어가 제공되는 형태. 다른 컴퓨터에 설치하고 운용하려고 할때 어떻게 배치하고 이용할 것이냐 하는게 배치라고 한다. 레이어 != 티어. 레이어별로 배치가 되긴 했지만 같지 않음. ***티어는 배치 문제이고, 레이어는 계층적, 구조적으로 만드는 방법이다.*** 티어는 어떤 노드에 어떻게 배치할 것이냐 하는 문제임. 

통상 이 그림의 예는 레이어별로 티어를 나누었음. 비지니스 로직을 미들 티어에 두었다. 프로세싱만 하는 노드를 적재 시켰다. 

가장 일반적인 인터넷 검색에 대한 예

<img src="image/스크린샷 2020-04-27 오후 12.40.26.png" alt="스크린샷 2020-04-27 오후 12.40.26" style="zoom:67%;" />

인터넷에 들어가서 제품을 선택한다고 한다면, 서버 단에 이 쿼리를 받아서 작업하는 것이 있고, 데이터베이스만 처리하는 데이터 레벨단이 따로. 유저의 티어 따로. 유저/프로세싱/데이터 세가지 티어로 나뉜것. 

##### 2티어 vs 3티어

3티어는 프로세싱을 하는 중간단계의 미들 티어가 존재한다. 이런 미들 티어를 이용 하면 좀더 scalable, robust, flexible한 서버단을 마련 할 수 있다. 프로세싱이 많아지면 중간 프로세싱에 대한 노드를 더 넣을수도 있고, 데이터가 많아지면 데이터 단에 대한 노드를 늘릴 수 있다. 각 스케일에 대한 크기를 조정 가능하다. 각 노드가 죽지않는 robust한 시스템이 된다. 유연성 있게 운용이 가능하게 된 것이다.

다른 종류의 일들을 각각 scaleout할수 있는 멀티플 소스로부터 데이터를 인티그레이트 할수 있는 좋은 구조를 가지고 있다.

예를들어 TP Monitor 분산 오브젝트. 웹 등

<img src="image/스크린샷 2020-04-27 오후 12.46.38.png" alt="스크린샷 2020-04-27 오후 12.46.38" style="zoom:50%;" />

서버단은 필요에 따라 스케일 아웃 가능. 

<img src="image/스크린샷 2020-04-27 오후 12.47.24.png" alt="스크린샷 2020-04-27 오후 12.47.24" style="zoom:67%;" />

수직적으로 일을 해나가는 형태

#### 멀티티어 

N티어 라고도 함. 상황에 따라 시스템의 요구사항에 따라 티어를 여러 단계로 나누는 것. 중간에 미들티어가 여러 단계가 있음. 리소스도 여러 단계를 넣을 수 있다. 프론트엔드 티어는 유저에 관련된 사용자 친근의 티어. 미들티어는 비지니스 로직이나 실행의 로직, 백엔드 티어는 사용자에게서 거리가 먼 처리. 데이터의 처리 등. 엔터프라이즈 어플리케이션 등에서 널리 사용. 

<img src="image/스크린샷 2020-04-27 오후 12.50.41.png" alt="스크린샷 2020-04-27 오후 12.50.41" style="zoom:50%;" />

멀티 티어로 나간다는 것은 미들 티어를 여러개로 나눌수도 있고 백엔드 티어를 더 확장시켜서 나갈 수 있는 구조도 있다.

#### 예시

##### 5티어

<img src="image/스크린샷 2020-04-27 오후 12.51.42.png" alt="스크린샷 2020-04-27 오후 12.51.42" style="zoom:67%;" />

클라이언트는 다양한 유저들이 브라우저를 통해 접근. 브라우저에 돌아가는 일들을 어느정도 정립한다. 브라우저에 돌아가는 프로그램들을 클라이언트에서 제공. 클라이언트 하나의 티어. 그다음 웹서버 웹사이트에서 제공. 인터넷으로 접근. 퍼블릭하게 웹서버에 접근 가능. 많은 경우에 웹서버는 공격에 취약함. 하나의 클라이언트가 웹서버에 로그인 하겠다고 하면 이 요청에 따라 세션을 유지해주는데, 이것은 프로토콜을 맞춰주고 메모리를 유지하고 관리가 필요함. 굉장히 많은 클라이언트가 리퀘스트를 보낸다면 성능이 떨어지고 심지어 죽기도 한다. 

회사에 대한 주요한 어플리케이션 서비스는 따로 어플리케이션 서버를 두어 안전하게 한다. 오퍼레이션/기능/리퀘스트 위주의 어플리케이션 서버. 이것과 연결되는 DB라던가 레거시 ERP시스템 등 스토리지관련 리소스 티어.

이렇게 클라이언트 - 웹서버 - 웹 어플리케이션 서비스 - 리소스 4티어

##### 장점

재사용성, scalability 보장. 필요에 따라 스케일을 확장 가능함. 어플리케이션의 오퍼레이션이 변경 될때마다 미들티어 단에서 언제든지 반영 가능. portable하다. 유연성을 가지고 있고 이식성도 있다. 필요에따라 서비스 론칭 가능. 스탠다드한 설계 가능. 

트래픽을 좀더 효율적으로 관리 가능. 디도스 공격 등에 대해 어플리케이션 서버를 안전하게 보호. 트래픽 적절한 운용 가능. 문제는 테스팅이 쉽지 않음. 노드들이 다 나누어져 있기 때문. 여러개의 서버를 관리한다는 것은 어려움이 따를 수도 있음. 