## 아키텍쳐-GRASP

### GRASP

**가장 키워드는 <u>Responsibility</u>. Responsibility를 Assignment해주는 일반적인 패턴을 GRASP라고 한다.** 모듈에 할일을 할당해주는 일반화된 원칙을 GRASP라고 지칭 할 수 있다. OO design 원칙에 기반을 두고 있다. 

클래스의 할 일(책임)을 결정해주는 것. 전체 해야 할 일중 어떤일이 어떤 객체에서 이루어져야 하고 어떻게 할당 할지. 다른 객체와 관련되어 일을 하는 것 등. 일을 할당 받은 객체는 전반적인 설계가 어떤것이다 라고 이루어지는것이 책임을 부여한다라고 함.

##### Responsibility

Contract or obligation이라 칭함. 보통 이러한 책임은 메소드를 통해 표현된다. 해야하는 일들이 메소드를 통해 오퍼레이션 되도록 함. 혼자 작업이 될 수도 있고, 다른 객체의 메소드를 콜해서 이용할 수도있다.

두가지 일이 있다.

- 해야할 일을 하는 (Doing)

  메소드를 통해 어떤 일을 오퍼레이션 할수 있다. 다른 객체를 실행 할수 있도록. 다른 오브젝트의 컨트롤이나 제어를 시행하는 것

- 해야할 일을 아는(knowing)

  캡슐화된 중요한 데이터에 대해 알고있다. 관련된 다른 객체를 알고있다. 이 이후에 작업될 여러 일들을 알고있다. 이 이후에 변경될 정보들에 대해 아는것도 이 카테고리에 들어감.

#### GRASP

1. Low coupling
2. High cohesion
3. Expert
4. Creator
5. Controller
6. Don't talk to Stranger

##### Low Coupling

커플링의 정의부터. 커플링은 한 클래스가 다른 클래스에 연결된 정도이다. 다른클래스는 아는 정도. 의존의 정도가 어느정도 강하느냐를 커플링이라고 한다. 연결된 정도가 낮다를 low coupling이라고 한다.

커플링이 높다는 것은 어떤 내용을 변경하고 싶을때 관련된 클래스가 너무 많아서 전부 바꿔야 한다는 의미. 어떤 작은 문제를 바꾸기 위해 많은것을 변경해야함. 재사용이 어려움. 변경에 취약함

책임을 주되 가급적 의존성을 낮추고 재사용성을 늘리는 것이 로우 커플링의 핵심

##### high cohesion

응집도가 높다. 그 클래스에서 하는 일이 관련되고 집중된 정도가 어느정도 강한지를 측정함. 한 클래스에서 해야할 일이 그 일에 관련되게만 응집되도록 하는것을 의미한다. 이것저것 다 하게 하는것은 좋지 않다는 것. 보통 스파게티 코드같은 것을 보면 한 클래스에서 이것저것 다 해서 보기 힘든데 그것이 이것이다. 

낮은 응집도를 가진다면 관련 없는것들이 너무 많다. 일들을 위해 에너지가 낭비되고, 이해가 어렵고, 변경이 어렵고 수정도 어렵다. 하이 커플링도 낳는 악영향이 있다.

해야 할일이 집중되서 있는 형태가 가장 바람직 하다. 이렇게 응집도가 높은 설계는 복잡합 일들을 관리하기 편하게 한다.

엘리먼트가 혹은 클래스가 왜 존재해야 하는지를 눈으로 쉽게 인식 할 수있다.  코드도 재사용 하기 쉽고 커플링도 낮아지는 효과를 볼 수 있다.  



![스크린샷 2020-04-06 오후 11.32.20](/Users/gilwoongkang/School/2001-note/소아/image/스크린샷 2020-04-06 오후 11.32.20.png)

##### Expert

전문가 라는 것인데, 전문가의 특징은? 그일을 아주 잘 아는 사람. Information Expert라고도 한다. 그 일에 대해서 잘 알고있는 역할을 가진 모듈을 그 일을 담당 하도록 하는것이 Expert를 만드는 설계가 할일..? 그 일을 수행하기에 적절한 모든 정보를 가진 클래스가 Information Expert라고 할 수 있다. 

전반적으로 클래스는 필요한 정보만 가지도록 하는것이 중요하다. 

정보가 있는 곳에서 일이 처리하도록 하는것이다. 정보가 다른곳에 돌아다니도록 하지 않는것이 중요핵심. 데이터가 로컬되도록 하는 것이 주된 내용.

정보에 관련되어 인캡슐레이션. 필요한 정보가 그 위치에 있도록 하여 커플링이 낮아진다. 외부에서 메소드를 불러 그 정보를 처리하도록 한다. Robust,maintainable하도록함.

behavior가 필요에 따라 정당한 위치에 있도록. 하이 코헤젼

##### Creator

컨스트럭터와 구별되야 한다. 컨스트럭터는 클래스를 만들고 그 객체를 생성 하도록 하는 컨스트럭터를 말하는 것이고 크리에이터는 관련된 객체에 대해 누가 그 객체를 생성하느냐를 결정 하는 것이다. 

예를들어 클래스 B가 있고 A가 있는데 B야 A의 인스턴스를 만들어 주겠니 ? 하는 것이다. 

- B aggregates A
- B contains A
- B records instance of A
- B closely uses A
- A가 이용하는 어트리뷰트를 B가 가지고 있을 때

##### Controller

제어. 외부에 일들이 일어나고 내부에 그 일들을 처리하는 경우가 있다. 내부의 일과 외부의 일을 분리하는 것을 컨트롤러가 한다. Indirect coupling하도록 함.

외부에서 이벤트가 일어나면 컨트롤러한테 보낸다. 이 컨트롤러는 이벤트 내용을 보고 핸들러를 불러준다. 제어자는 외부의 일과 내부의 일을 컨트롤러 기준으로 구분되게 설계 하도록 함. 

외부의 일을 받아서 적절한 내부에게 forwarding함. 

facade controller. Use case 역할이나 전체 비지니스의 organization 역할 role controller(역할을 담당하는 컨트롤러) 

##### Don't talk to strangers

어떤 두 클래스가 있는데 두 클래스는 다이렉트하게 연결될 필요가 없음. 다이렉트하게 연결하지 말아라. 레퍼런스를 연결해주지 말라는 의미. 

정보만 교환하는 경우 인다이렉트하게 정보만 넘겨줄 수 있는 클래스를 하나 만들것. 직접 연결 된 경우 필요 이상의 데이터를 모두 이용 가능할 수 있게 됌. 

Intermediate unit이 생김. (중재) 관련 없는 클래스가 연결되려 할때 이런 중재 유닛을 두고 관리해야 한다.

커플링 낮아짐. 

